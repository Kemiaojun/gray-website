import{b as B,c as I,d as Q,j as W,E as U,f as K,g as X,h as Y,i as Z}from"./element-plus-COxNbMku.js";import{a as A,l as ee,d as ae,b as le}from"./link-D12N2HMl.js";import{G as L}from"./GWTitleImageCard-ClVbYzTR.js";import{I as te}from"./ImageUpload-CzEuNr8R.js";import{d as $,r as m,b as R,w as oe,o as i,c as v,a as b,L as t,P as r,M as V,a7 as w,Q as C,H as E,T as F}from"./@vue-BV9Q_yhH.js";import{_ as S}from"./index-BYZBXLA3.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Didlxlvp.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./request_website-ByYUMKNP.js";import"./axios-Cm0UX6qg.js";import"./pinia-CWZPuNdE.js";import"./vue-router-DaOdIdNP.js";import"./vue-pdf-embed-BcRweBTn.js";const re={class:"gw-search-root"},ne={class:"search-item"},se=$({__name:"LinkSearch",emits:["change"],setup(q,{emit:p}){const f=m(),c=m(),g=p;return R(async()=>{await A().then(n=>{debugger;n.data&&(f.value=n.data)})}),oe(()=>c.value,n=>{g("change",n)},{deep:!0,immediate:!0}),(n,u)=>{const e=B,y=I;return i(),v("div",re,[b("div",ne,[t(y,{modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=d=>c.value=d),clearable:"",placeholder:"分组",style:{width:"150px"}},{default:r(()=>[(i(!0),v(V,null,w(f.value,d=>(i(),C(e,{key:d.value,label:d.name,value:d.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])}}}),ue=S(se,[["__scopeId","data-v-3c287767"]]),ie={class:"library-container"},de={class:"graython-Link-root"},me=["onClick"],pe=["onClick"],ce=$({__name:"Anchor",setup(q){const p=m(!0),f=m(),c=m(),g=m();R(async()=>{await A().then(a=>{c.value=a.data}),n(null)});const n=async a=>{await ee(a||0).then(o=>{g.value=o.data})},u=m(!1),e=E({name:"",remark:"",url:"",cover:"",coverUrl:"",groupType:0});let y;const d=E({name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],remark:[{required:!0,message:"请输入网站描述",trigger:"blur"}],url:[{required:!0,message:"请输入网站链接",trigger:"blur"}]}),h=a=>{a?(e.id=a.id,e.name=a.name,e.remark=a.remark,e.url=a.url,e.cover=a.cover,e.coverUrl=a.coverUrl,e.groupType=a.groupType):(e.id=void 0,e.name="",e.remark="",e.url="",e.cover="",e.coverUrl=void 0,e.groupType=0)},z=()=>{h(),u.value=!0},D=a=>{h(a),u.value=!0};function M(a){W.confirm("确定要删除合集["+a.name+"]吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await ae(a.id).then(()=>{n()}),U({type:"success",message:"删除成功!"})}).catch(()=>{U({type:"info",message:"取消删除"})})}const k=()=>{u.value=!1},N=async a=>{p.value&&a&&await a.validate(async(o,_)=>{if(o){p.value=!1;let s=new FormData;s.append("file",y),s.append("entity",JSON.stringify({id:e.id,name:e.name,remark:e.remark,url:e.url,cover:e.cover,groupType:e.groupType})),await le(s).then(T=>{p.value=!0,h(),k(),n()}).finally(()=>{p.value=!0})}else console.log("error submit!",_)})},G=a=>{y=a};return(a,o)=>{const _=K,s=X,T=B,O=I,x=Y,j=Z,H=Q;return i(),v("div",ie,[t(ue,{onChange:n}),b("div",de,[t(L,{blankCard:!0,onClick:z}),(i(!0),v(V,null,w(g.value,(l,J)=>(i(),C(L,{blankCard:!1,key:J,image:l.coverUrl,title:l.name,"card-data":l},{"customize-btn":r(()=>[b("span",{onClick:P=>D(l),style:{color:"green"},class:"customize-btn iconbl bl-a-fileedit-line"},null,8,me),b("span",{onClick:P=>M(l),style:{color:"red"},class:"customize-btn iconbl bl-delete-line"},null,8,pe)]),_:2},1032,["image","title","card-data"]))),128))]),t(H,{style:{padding:"30px",height:"600px",overflow:"scroll"},title:"管理网址",modelValue:u.value,"onUpdate:modelValue":o[6]||(o[6]=l=>u.value=l),width:"600px",onClose:k},{default:r(()=>[t(j,{ref_key:"anchorFormRef",ref:f,model:e,"label-width":"auto",rules:d},{default:r(()=>[t(te,{size:150,"image-url":e.coverUrl,onSelectFile:G},null,8,["image-url"]),t(s,{label:"封面：",prop:"cover"},{default:r(()=>[t(_,{modelValue:e.cover,"onUpdate:modelValue":o[0]||(o[0]=l=>e.cover=l),placeholder:"请输入封面URL"},null,8,["modelValue"])]),_:1}),t(s,{label:"名称：",prop:"name"},{default:r(()=>[t(_,{modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=l=>e.name=l),placeholder:"请输入网址名称"},null,8,["modelValue"])]),_:1}),t(s,{label:"描述：",prop:"remark"},{default:r(()=>[t(_,{type:"textarea",rows:2,modelValue:e.remark,"onUpdate:modelValue":o[2]||(o[2]=l=>e.remark=l),placeholder:"请输入网址描述"},null,8,["modelValue"])]),_:1}),t(s,{label:"网址：",prop:"url"},{default:r(()=>[t(_,{modelValue:e.url,"onUpdate:modelValue":o[3]||(o[3]=l=>e.url=l),placeholder:"请输入网址URL"},null,8,["modelValue"])]),_:1}),t(s,{label:"分组：",prop:"groupType"},{default:r(()=>[t(O,{modelValue:e.groupType,"onUpdate:modelValue":o[4]||(o[4]=l=>e.groupType=l),filterable:"",placeholder:"请选择分组",style:{width:"200px"}},{default:r(()=>[(i(!0),v(V,null,w(c.value,l=>(i(),C(T,{key:l.value,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(s,{style:{"flex-direction":"column"}},{default:r(()=>[t(x,{onClick:k},{default:r(()=>[F("取消")]),_:1}),t(x,{type:"primary",onClick:o[5]||(o[5]=l=>N(f.value))},{default:r(()=>[F("确定")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Ie=S(ce,[["__scopeId","data-v-82cb3f8a"]]);export{Ie as default};
