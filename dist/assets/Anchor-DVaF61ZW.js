import{f as $,c as O,E as T,h as j,i as H,d as J,e as P,j as Q,k as W}from"./element-plus-D_LIGSL8.js";import{a as K,l as X,d as Y,b as Z}from"./link-DMsZ3Hig.js";import{G as w}from"./GWTitleImageCard-CbBVR4Tc.js";import{_ as ee}from"./ImageUpload-CX47-FfS.js";/* empty css                                                                          */import{d as le,r as i,b as oe,H as x,w as ae,c as _,a as g,L as t,M as U,a7 as E,P as r,o as p,Q as L,T as F}from"./@vue-BV9Q_yhH.js";import{_ as te}from"./index-CizMaJaH.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./request_website-CRo8-WmJ.js";import"./axios-Cm0UX6qg.js";/* empty css                             */import"./pinia-CWZPuNdE.js";import"./vue-router-DaOdIdNP.js";import"./vue-pdf-embed-BcRweBTn.js";const re={class:"library-container"},ne={class:"graython-Link-root"},se=["onClick"],ue=["onClick"],ie=le({__name:"Anchor",setup(me){const d=i(!0),y=i(),b=i(),k=i(),s=i();oe(async()=>{await K().then(l=>{k.value=l.data}),c(s.value)});const c=async l=>{s.value=l,await X(s.value?s.value:-1).then(a=>{b.value=a.data})},m=i(!1),e=x({name:"",remark:"",url:"",cover:"",coverUrl:"",groupType:0});let V;const B=x({name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],remark:[{required:!0,message:"请输入网站描述",trigger:"blur"}],url:[{required:!0,message:"请输入网站链接",trigger:"blur"}]}),f=l=>{l?(e.id=l.id,e.name=l.name,e.remark=l.remark,e.url=l.url,e.cover=l.cover,e.coverUrl=l.coverUrl,e.groupType=l.groupType):(e.id=void 0,e.name="",e.remark="",e.url="",e.cover="",e.coverUrl=void 0,e.groupType=0)},A=()=>{f(),m.value=!0},R=l=>{f(l),m.value=!0};function q(l){O.confirm("确定要删除合集["+l.name+"]吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await Y(l.id).then(()=>{c(s.value)}),T({type:"success",message:"删除成功!"})}).catch(()=>{T({type:"info",message:"取消删除"})})}const v=()=>{m.value=!1,f()},z=async l=>{d.value&&l&&await l.validate(async(a,u)=>{if(a){d.value=!1;let n=new FormData;n.append("file",V),n.append("entity",JSON.stringify({id:e.id,name:e.name,remark:e.remark,url:e.url,cover:e.cover,groupType:e.groupType})),await Z(n).then(h=>{d.value=!0,f(),v(),c(s.value)}).finally(()=>{d.value=!0})}else console.log("error submit!",u)})},D=l=>{V=l};return ae(()=>s.value,l=>{c(s.value)},{deep:!0,immediate:!0}),(l,a)=>{const u=j,n=H,h=J,I=P,C=Q,M=W,N=$;return p(),_("div",re,[g("div",ne,[t(w,{blankCard:!0,onClick:A}),(p(!0),_(U,null,E(b.value,(o,G)=>(p(),L(w,{blankCard:!1,key:G,image:o.coverUrl,title:o.name,"card-data":o},{"customize-btn":r(()=>[g("span",{onClick:S=>R(o),style:{color:"green"},class:"customize-btn iconbl bl-a-fileedit-line"},null,8,se),g("span",{onClick:S=>q(o),style:{color:"red"},class:"customize-btn iconbl bl-delete-line"},null,8,ue)]),_:2},1032,["image","title","card-data"]))),128))]),t(N,{style:{padding:"30px",height:"600px",overflow:"scroll"},title:"管理网址",modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=o=>m.value=o),width:"600px",onClose:v},{default:r(()=>[t(M,{ref_key:"anchorFormRef",ref:y,model:e,"label-width":"auto",rules:B},{default:r(()=>[t(ee,{size:150,"image-url":e.coverUrl,onSelectFile:D},null,8,["image-url"]),t(n,{label:"封面：",prop:"cover"},{default:r(()=>[t(u,{modelValue:e.cover,"onUpdate:modelValue":a[0]||(a[0]=o=>e.cover=o),placeholder:"请输入封面URL"},null,8,["modelValue"])]),_:1}),t(n,{label:"名称：",prop:"name"},{default:r(()=>[t(u,{modelValue:e.name,"onUpdate:modelValue":a[1]||(a[1]=o=>e.name=o),placeholder:"请输入网址名称"},null,8,["modelValue"])]),_:1}),t(n,{label:"描述：",prop:"remark"},{default:r(()=>[t(u,{type:"textarea",rows:2,modelValue:e.remark,"onUpdate:modelValue":a[2]||(a[2]=o=>e.remark=o),placeholder:"请输入网址描述"},null,8,["modelValue"])]),_:1}),t(n,{label:"网址：",prop:"url"},{default:r(()=>[t(u,{modelValue:e.url,"onUpdate:modelValue":a[3]||(a[3]=o=>e.url=o),placeholder:"请输入网址URL"},null,8,["modelValue"])]),_:1}),t(n,{label:"分组：",prop:"groupType"},{default:r(()=>[t(I,{modelValue:e.groupType,"onUpdate:modelValue":a[4]||(a[4]=o=>e.groupType=o),filterable:"",placeholder:"请选择分组",style:{width:"200px"}},{default:r(()=>[(p(!0),_(U,null,E(k.value,o=>(p(),L(h,{key:o.value,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(n,{style:{"flex-direction":"column"}},{default:r(()=>[t(C,{onClick:v},{default:r(()=>[F("取消")]),_:1}),t(C,{type:"primary",onClick:a[5]||(a[5]=o=>z(y.value))},{default:r(()=>[F("确定")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Be=te(ie,[["__scopeId","data-v-1b23c583"]]);export{Be as default};
