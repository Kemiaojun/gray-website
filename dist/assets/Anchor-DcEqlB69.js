import{d as W,j,E as L,b as H,c as J,f as P,g as Q,h as K,i as X}from"./element-plus-COxNbMku.js";import{a as Y,l as Z,d as ee,b as le}from"./link-Ci1yufXz.js";import{G as F}from"./GWTitleImageCard-BKg5PYol.js";import{I as ae}from"./ImageUpload-OLHFy9Lw.js";import{_ as A}from"./index-DaFc2l6C.js";import{c as v,D as oe,o as s,d as re,r as d,b as te,H as B,w as ne,L as r,P as t,a as g,M as k,a7 as V,Q as w,T as I}from"./@vue-BV9Q_yhH.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Didlxlvp.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./request_website-CFdvV47B.js";import"./axios-Cm0UX6qg.js";import"./pinia-CWZPuNdE.js";import"./vue-router-DaOdIdNP.js";import"./vue-pdf-embed-BcRweBTn.js";const se={},ue={class:"gw-search-root"};function ie(C,m){return s(),v("div",ue,[oe(C.$slots,"search-items",{},void 0,!0)])}const de=A(se,[["render",ie],["__scopeId","data-v-86adbc59"]]),me={class:"library-container"},pe={class:"search-item"},ce={class:"graython-Link-root"},ve=["onClick"],fe=["onClick"],_e=re({__name:"Anchor",setup(C){const m=d(!0),T=d(),U=d(),y=d(),n=d();te(async()=>{await Y().then(a=>{y.value=a.data}),f(n.value)});const f=async a=>{n.value=a,await Z(n.value?n.value:-1).then(o=>{U.value=o.data})},p=d(!1),e=B({name:"",remark:"",url:"",cover:"",coverUrl:"",groupType:0});let x;const $=B({name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],remark:[{required:!0,message:"请输入网站描述",trigger:"blur"}],url:[{required:!0,message:"请输入网站链接",trigger:"blur"}]}),b=a=>{a?(e.id=a.id,e.name=a.name,e.remark=a.remark,e.url=a.url,e.cover=a.cover,e.coverUrl=a.coverUrl,e.groupType=a.groupType):(e.id=void 0,e.name="",e.remark="",e.url="",e.cover="",e.coverUrl=void 0,e.groupType=0)},D=()=>{b(),p.value=!0},R=a=>{b(a),p.value=!0};function S(a){j.confirm("确定要删除合集["+a.name+"]吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await ee(a.id).then(()=>{f(n.value)}),L({type:"success",message:"删除成功!"})}).catch(()=>{L({type:"info",message:"取消删除"})})}const h=()=>{p.value=!1},q=async a=>{m.value&&a&&await a.validate(async(o,_)=>{if(o){m.value=!1;let u=new FormData;u.append("file",x),u.append("entity",JSON.stringify({id:e.id,name:e.name,remark:e.remark,url:e.url,cover:e.cover,groupType:e.groupType})),await le(u).then(c=>{m.value=!0,b(),h(),f(n.value)}).finally(()=>{m.value=!0})}else console.log("error submit!",_)})},z=a=>{x=a};return ne(()=>n.value,a=>{f(n.value)},{deep:!0,immediate:!0}),(a,o)=>{const _=H,u=J,c=P,i=Q,E=K,G=X,M=W;return s(),v("div",me,[r(de,null,{"search-items":t(()=>[g("div",pe,[r(u,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l),clearable:"",placeholder:"分组",style:{width:"150px"}},{default:t(()=>[(s(!0),v(k,null,V(y.value,l=>(s(),w(_,{key:l.value,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),g("div",ce,[r(F,{blankCard:!0,onClick:D}),(s(!0),v(k,null,V(U.value,(l,N)=>(s(),w(F,{blankCard:!1,key:N,image:l.coverUrl,title:l.name,"card-data":l},{"customize-btn":t(()=>[g("span",{onClick:O=>R(l),style:{color:"green"},class:"customize-btn iconbl bl-a-fileedit-line"},null,8,ve),g("span",{onClick:O=>S(l),style:{color:"red"},class:"customize-btn iconbl bl-delete-line"},null,8,fe)]),_:2},1032,["image","title","card-data"]))),128))]),r(M,{style:{padding:"30px",height:"600px",overflow:"scroll"},title:"管理网址",modelValue:p.value,"onUpdate:modelValue":o[7]||(o[7]=l=>p.value=l),width:"600px",onClose:h},{default:t(()=>[r(G,{ref_key:"anchorFormRef",ref:T,model:e,"label-width":"auto",rules:$},{default:t(()=>[r(ae,{size:150,"image-url":e.coverUrl,onSelectFile:z},null,8,["image-url"]),r(i,{label:"封面：",prop:"cover"},{default:t(()=>[r(c,{modelValue:e.cover,"onUpdate:modelValue":o[1]||(o[1]=l=>e.cover=l),placeholder:"请输入封面URL"},null,8,["modelValue"])]),_:1}),r(i,{label:"名称：",prop:"name"},{default:t(()=>[r(c,{modelValue:e.name,"onUpdate:modelValue":o[2]||(o[2]=l=>e.name=l),placeholder:"请输入网址名称"},null,8,["modelValue"])]),_:1}),r(i,{label:"描述：",prop:"remark"},{default:t(()=>[r(c,{type:"textarea",rows:2,modelValue:e.remark,"onUpdate:modelValue":o[3]||(o[3]=l=>e.remark=l),placeholder:"请输入网址描述"},null,8,["modelValue"])]),_:1}),r(i,{label:"网址：",prop:"url"},{default:t(()=>[r(c,{modelValue:e.url,"onUpdate:modelValue":o[4]||(o[4]=l=>e.url=l),placeholder:"请输入网址URL"},null,8,["modelValue"])]),_:1}),r(i,{label:"分组：",prop:"groupType"},{default:t(()=>[r(u,{modelValue:e.groupType,"onUpdate:modelValue":o[5]||(o[5]=l=>e.groupType=l),filterable:"",placeholder:"请选择分组",style:{width:"200px"}},{default:t(()=>[(s(!0),v(k,null,V(y.value,l=>(s(),w(_,{key:l.value,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(i,{style:{"flex-direction":"column"}},{default:t(()=>[r(E,{onClick:h},{default:t(()=>[I("取消")]),_:1}),r(E,{type:"primary",onClick:o[6]||(o[6]=l=>q(T.value))},{default:t(()=>[I("确定")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),De=A(_e,[["__scopeId","data-v-e495f8cc"]]);export{De as default};
