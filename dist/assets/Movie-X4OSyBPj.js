import{q as T}from"./element-plus-COxNbMku.js";import{_ as V}from"./GWPreviewVideo-DQ8reQyz.js";import{u as z}from"./vue-router-DaOdIdNP.js";import{d as g}from"./request_website-CFdvV47B.js";import{_ as h}from"./index-DaFc2l6C.js";import{c as v,D as A,o as i,d as M,I as B,a as s,u as D,U as G,ab as F,r as n,b as W,L as R,P as b,Q as I,V as L,M as U,a7 as q}from"./@vue-BV9Q_yhH.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Didlxlvp.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./axios-Cm0UX6qg.js";import"./pinia-CWZPuNdE.js";import"./vue-pdf-embed-BcRweBTn.js";const E=o=>{const e={headers:{"Content-Type":"multipart/form-data"}};return g.post("/movie/cover",o,e)},Q=()=>g.get("/movie/refresh"),j=o=>g.post("/movie/page",{...o}),H={},J={class:"gw-flex-container"};function K(o,e){return i(),v("div",J,[A(o.$slots,"flex-items",{},void 0,!0)])}const O=h(H,[["render",K],["__scopeId","data-v-4688a806"]]),X={class:"gw-flex-item"},Y={class:"gw-flex-card"},Z=["src"],ee={class:"gw-flex-info"},te={class:"movie-title"},ae=M({__name:"GWFlexImage",props:{title:{},src:{},itemData:{},play:{type:Function},click:{type:Function}},setup(o){const e=o,{src:r,title:d}=B(e);function f(){if(e!=null&&e.click){const t=e.itemData?F(e.itemData):{};e.click(t)}}function l(){if(e!=null&&e.play){const t=e.itemData?F(e.itemData):{};e.play(t)}}return(t,y)=>(i(),v("div",X,[s("div",Y,[s("img",{onclick:f,src:D(r),onerror:"this.onerror=null;this.src='/favicon.png';",alt:"Sorry, something went wrong"},null,8,Z),s("div",ee,[s("h3",te,G(D(d)),1),s("h3",{class:"movie-play",onclick:l},"Play")])])]))}}),oe=h(ae,[["__scopeId","data-v-4f650451"]]),ne={class:"image-gallery"},se={style:{width:"100%"}},ie=M({__name:"Movie",setup(o){z();const e=n(0),r=n(1),d=n(20),f=n(),l=n(!1),t=n(),y=a=>{t.value=a,k.value.click()},P=a=>{t.value=a,l.value=!0},S=a=>{r.value=a,w()},w=async()=>{await j({pageNo:r.value,pageSize:d.value}).then(a=>{f.value=a.data.result,e.value=a.data.total})},x=n(),k=n(),$=async a=>{if(t.value){const c=a.target;if(c.files&&c.files[0]){const _=new FileReader;_.onload=p=>{var m;x.value=(m=p.target)==null?void 0:m.result},_.readAsDataURL(c.files[0]);let u=new FormData;u.append("file",c.files[0]),u.append("id",t.value.id+""),await E(u).then(p=>{}).finally(()=>{})}}},N=()=>{l.value=!1};return W(async()=>{w(),Q()}),(a,c)=>{var p,m;const _=V,u=T;return i(),v("div",ne,[R(O,{style:{"min-height":"calc(100% - 100px)"}},{"flex-items":b(()=>[(i(!0),v(U,null,q(f.value,(C,re)=>(i(),I(oe,{click:y,play:P,title:C.title,"item-data":C,src:x.value},null,8,["title","item-data","src"]))),256))]),_:1}),s("input",{ref_key:"fileselectRef",ref:k,style:{display:"none"},type:"file",accept:"image/*",onChange:$},null,544),l.value?(i(),I(_,{key:0,url:(p=t.value)==null?void 0:p.previewUrl,name:(m=t.value)==null?void 0:m.title,"on-close":N},null,8,["url","name"])):L("",!0),s("div",se,[R(u,{style:{"flex-direction":"row-reverse"},background:"",layout:"prev, pager, next",total:e.value,"pager-count":5,"page-size":d.value,"current-page":r.value,onCurrentChange:S},null,8,["total","page-size","current-page"])])])}}}),De=h(ie,[["__scopeId","data-v-9e0d3260"]]);export{De as default};
