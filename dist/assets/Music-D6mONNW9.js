import{E as Q,b as Z,l as ge,n as be,o as ye,p as ke,h as Ce}from"./element-plus-D_LIGSL8.js";import{_ as j,a as D,g as J}from"./index-DSWghAX-.js";import{b as $e}from"./vue-router-DaOdIdNP.js";import{m as ce}from"./movie-DCt_eB1C.js";import{m as oe,a as ue,p as ie,b as we,c as xe}from"./music-B2-5SyJn.js";import{d as B,o as r,c as b,a as e,J as z,I as ze,u as S,U as y,ab as Me,h as W,r as d,b as ee,M as q,a7 as H,Q as V,P as _,L as s,at as te,au as se,w as X,G as Te}from"./@vue-BV9Q_yhH.js";import{e as G}from"./mitt-CJohXFwE.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-CWZPuNdE.js";import"./axios-Cm0UX6qg.js";import"./vue-pdf-embed-BcRweBTn.js";import"./request_website-Co0nVup-.js";import"./mitt-DJ65BbbF.js";const Se=["src"],Ne=B({__name:"GWAvatar",props:{size:{type:String,default:"medium"},src:{type:String,default:"/favicon.png"}},setup(p){return(t,A)=>(r(),b("div",{class:z(["avatar",p.size])},[e("img",{src:p.src,alt:""},null,8,Se)],2))}}),ne=j(Ne,[["__scopeId","data-v-b65b1e4f"]]),Ie={class:"card_image"},Ve=["src"],Ae={class:"card_title title-white"},Le=B({__name:"GWTitleCard",props:{image:{},title:{},cardData:{},clickT:{type:Function}},setup(p){const t=p,{image:A,title:N}=ze(t);function M(){if(t!=null&&t.clickT){const k=t.cardData?Me(t.cardData):{};t==null||t.clickT(k)}}return(k,u)=>(r(),b("div",{class:"card",onClick:M},[e("div",Ie,[e("img",{src:S(A)},null,8,Ve),e("div",Ae,[e("p",null,y(S(N)),1)])])]))}}),Pe=j(Le,[["__scopeId","data-v-5c9bc0c1"]]),K=p=>(te("data-v-8a1c12c5"),p=p(),se(),p),Ee={class:"grid"},Ge=K(()=>e("th",{class:"pc-show"},"Size",-1)),We=K(()=>e("th",{class:"pc-show"},"Time",-1)),je=K(()=>e("th",{class:"pc-show"},"Ext",-1)),Be=K(()=>e("th",null,"Operation",-1)),Ue={class:"pc-show"},Fe=["onClick"],Re={class:"pc-show"},Oe={class:"pc-show"},Je={class:"pc-show"},Qe={class:"ext-div"},qe={style:{display:"flex"}},He={class:"controls"},Ke=["disabled"],Xe=["disabled"],Ye=B({__name:"GWSortableTable",props:{currentMusic:{},tableData:{},clickT:{type:Function},pageChange:{type:Function}},setup(p){const t=p;let A=W(()=>t.currentMusic?t.currentMusic.id:-1);function N(a){t!=null&&t.clickT&&(t==null||t.clickT([a]))}async function M(a,i){await oe(i.id).then(n=>{n.data&&(m.value[a].favorite=m.value[a].favorite=="是"?"否":"是",Q({type:"info",message:"歌曲添加到我喜欢"}))}).finally(()=>{})}async function k(a,i){await ue(i.id).then(n=>{n.data&&(m.value[a].playlist=m.value[a].playlist=="是"?"否":"是",Q({type:"info",message:"歌曲添加到播放列表"}))}).finally(()=>{})}const u=d("trackNumber"),w=d("asc"),f=d(0),T=d(5),I=a=>{a===u.value?w.value=w.value==="asc"?"desc":"asc":w.value="asc",u.value=a},x=function(a){return a===-1&&f.value>0||a===1&&(f.value+1)*T.value<t.tableData.length},P=()=>{x(-1)&&f.value--,t.pageChange&&t.pageChange(m.value)},E=()=>{x(1)&&f.value++,t.pageChange&&t.pageChange(m.value)};let m=W(()=>t.tableData.sort((a,i)=>{let n=w.value==="asc"?1:-1;return a[u.value]<i[u.value]?-1*n:a[u.value]>i[u.value]?1*n:0}).filter((a,i)=>{let n=f.value*T.value,h=(f.value+1)*T.value;return i>=n&&i<h}));return ee(()=>{setTimeout(()=>{t.pageChange&&t.pageChange(m.value)},1e3)}),(a,i)=>{const n=D,h=Z;return r(),b("div",Ee,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{class:z(["pc-show",{sorted:u.value==="trackNumber"}]),onClick:i[0]||(i[0]=c=>I("trackNumber"))}," # ",2),e("th",{class:z({sorted:u.value==="title"}),onClick:i[1]||(i[1]=c=>I("title"))}," Title ",2),Ge,We,je,Be])]),e("tbody",null,[(r(!0),b(q,null,H(S(m),(c,C)=>(r(),b("tr",null,[e("td",Ue,y(c.trackNumber),1),e("td",{onClick:$=>N(c)},[e("div",{class:z(c.id==S(A)?"music-title active":"music-title")},y(c.title),3)],8,Fe),e("td",Re,y(c.prettySize),1),e("td",Oe,y(c.duration>0?c.duration:"未知"),1),e("td",Je,[e("div",Qe,y(c.ext),1)]),e("td",qe,[c.favorite=="否"?(r(),V(h,{key:0,class:"item",effect:"dark",content:"添加到我喜欢",placement:"right"},{default:_(()=>[s(n,{size:20,"icon-class":"mine_heart",onClick:$=>M(C,c)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:1,class:"item",effect:"dark",content:"从我喜欢移除",placement:"right"},{default:_(()=>[s(n,{size:20,"icon-class":"heart-break",onClick:$=>M(C,c)},null,8,["onClick"])]),_:2},1024)),c.playlist=="否"?(r(),V(h,{key:2,class:"item",effect:"dark",content:"添加到播放列表",placement:"right"},{default:_(()=>[s(n,{style:{"margin-left":"10px"},size:20,"icon-class":"list",onClick:$=>k(C,c)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:3,class:"item",effect:"dark",content:"从播放列表移除",placement:"right"},{default:_(()=>[s(n,{style:{"margin-left":"10px"},size:20,"icon-class":"delete",onClick:$=>k(C,c)},null,8,["onClick"])]),_:2},1024))])]))),256))])]),e("div",He,[e("button",{class:"btn btn-sm",disabled:!x(-1),onClick:P}," ← ",8,Ke),e("button",{class:"btn btn-sm",disabled:!x(1),onClick:E}," → ",8,Xe)])])}}}),Ze=j(Ye,[["__scopeId","data-v-8a1c12c5"]]),le=p=>(te("data-v-da0375f2"),p=p(),se(),p),De={class:"grid"},et=le(()=>e("th",{class:"pc-show"},"Size",-1)),tt=le(()=>e("th",{class:"pc-show"},"Ext",-1)),st=le(()=>e("th",null,"Operation",-1)),lt={class:"pc-show"},at=["onClick"],ct={class:"pc-show"},it={class:"pc-show"},nt={class:"pc-show"},ot={class:"ext-div"},ut={style:{display:"flex"}},rt={class:"controls"},dt=["disabled"],vt=["disabled"],pt=B({__name:"GWMusicSortableTable",props:{currentMusic:{},tableData:{},clickT:{type:Function},pageChange:{type:Function}},setup(p){const t=p;let A=W(()=>t.currentMusic?t.currentMusic.id:-1);function N(a){t!=null&&t.clickT&&(t==null||t.clickT([a]))}async function M(a,i){await oe(i.id).then(n=>{n.data&&(m.value[a].favorite=m.value[a].favorite=="是"?"否":"是",Q({type:"info",message:"歌曲添加到我喜欢"}))}).finally(()=>{})}async function k(a,i){await ue(i.id).then(n=>{n.data&&(m.value[a].playlist=m.value[a].playlist=="是"?"否":"是",Q({type:"info",message:"歌曲添加到播放列表"}))}).finally(()=>{})}const u=d("trackNumber"),w=d("asc"),f=d(0),T=d(5),I=a=>{a===u.value?w.value=w.value==="asc"?"desc":"asc":w.value="asc",u.value=a},x=function(a){return a===-1&&f.value>0||a===1&&(f.value+1)*T.value<t.tableData.length},P=()=>{x(-1)&&f.value--,t.pageChange&&t.pageChange(m.value)},E=()=>{x(1)&&f.value++,t.pageChange&&t.pageChange(m.value)};let m=W(()=>t.tableData.sort((a,i)=>{let n=w.value==="asc"?1:-1;return a[u.value]<i[u.value]?-1*n:a[u.value]>i[u.value]?1*n:0}).filter((a,i)=>{let n=f.value*T.value,h=(f.value+1)*T.value;return i>=n&&i<h}));return ee(()=>{setTimeout(()=>{t.pageChange&&t.pageChange(m.value)},1e3)}),(a,i)=>{const n=D,h=Z;return r(),b("div",De,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{class:z(["pc-show",u.value==="trackNumber"?"sorted":""]),onClick:i[0]||(i[0]=c=>I("trackNumber"))}," # ",2),e("th",{class:z({sorted:u.value==="title"}),onClick:i[1]||(i[1]=c=>I("title"))}," Title ",2),e("th",{class:z([u.value==="artist"?"sorted":""]),onClick:i[2]||(i[2]=c=>I("artist"))}," Artist ",2),e("th",{class:z(["pc-show",u.value==="album"?"sorted":""]),onClick:i[3]||(i[3]=c=>I("album"))}," Album ",2),et,tt,st])]),e("tbody",null,[(r(!0),b(q,null,H(S(m),(c,C)=>(r(),b("tr",null,[e("td",lt,y(c.trackNumber),1),e("td",{onClick:$=>N(c)},[e("div",{class:z(c.id==S(A)?"music-title active":"music-title")},y(c.title),3)],8,at),e("td",null,y(c.artist),1),e("td",ct,y(c.album),1),e("td",it,y(c.prettySize),1),e("td",nt,[e("div",ot,y(c.ext),1)]),e("td",ut,[c.favorite=="否"?(r(),V(h,{key:0,class:"item",effect:"dark",content:"添加到我喜欢",placement:"right"},{default:_(()=>[s(n,{size:20,"icon-class":"mine_heart",onClick:$=>M(C,c)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:1,class:"item",effect:"dark",content:"从我喜欢移除",placement:"right"},{default:_(()=>[s(n,{size:20,"icon-class":"heart-break",onClick:$=>M(C,c)},null,8,["onClick"])]),_:2},1024)),c.playlist=="否"?(r(),V(h,{key:2,class:"item",effect:"dark",content:"添加到播放列表",placement:"right"},{default:_(()=>[s(n,{style:{"margin-left":"10px"},size:20,"icon-class":"list",onClick:$=>k(C,c)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:3,class:"item",effect:"dark",content:"从播放列表移除",placement:"right"},{default:_(()=>[s(n,{style:{"margin-left":"10px"},size:20,"icon-class":"delete",onClick:$=>k(C,c)},null,8,["onClick"])]),_:2},1024))])]))),256))])]),e("div",rt,[e("button",{class:"btn btn-sm",disabled:!x(-1),onClick:P}," ← ",8,dt),e("button",{class:"btn btn-sm",disabled:!x(1),onClick:E}," → ",8,vt)])])}}}),Y=j(pt,[["__scopeId","data-v-da0375f2"]]),mt=p=>(te("data-v-18ad9afa"),p=p(),se(),p),_t={class:"music-root-container"},ft=mt(()=>e("div",{style:{"margin-left":"10px"}},null,-1)),ht={key:0,class:"tab-body"},gt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},bt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},yt={key:1,class:"tab-body"},kt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},Ct={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},$t={key:2,class:"tab-body"},wt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},xt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},zt={key:3,class:"tab-body"},Mt={key:0},Tt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},St=["onClick"],Nt={class:"name"},It={key:1,class:"row-card"},Vt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},At={class:"pc-show",style:{"flex-grow":"1","font-weight":"bold","font-style":"italic"}},Lt={class:"row-card"},Pt={key:2},Et={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},Gt=["src"],Wt={class:"pc-show",style:{"flex-grow":"1","font-weight":"bold","font-style":"italic"}},jt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},Bt=B({__name:"Music",setup(p){$e();const t=d("1"),A=function(l,o){t.value=l,l=="1"?u.value=1:l=="2"?N():l=="3"?N({favorite:1}):l=="4"&&N({playlist:1})};async function N(l){await ie({pageNo:1,pageSize:500,name:l==null?void 0:l.musicName,favorite:l==null?void 0:l.favorite,playlist:l==null?void 0:l.playlist}).then(o=>{c.value=o.data.result})}const M=function(l){N({musicName:l})},k=d(),u=d(1),w=d(),f=d(),T=d(""),I=d(""),x=d(),P=d(),E=d(),m=d([]),a=d([]);d([]);const i=d([]),n=d([]),h=d([]),c=d([]);X(()=>x.value,l=>{M(l)}),X(()=>P.value,l=>{M(l)}),X(()=>E.value,l=>{M(l)});const C=()=>{G.emit("previousMusic")},$=()=>{G.emit("nextMusic")},re=l=>{G.emit("setMusic",l)},de=()=>{G.emit("playMusic")},L=l=>{G.emit("playSelectedMusic",l),re(0),de()},U=function(l){h.value=l},ve=async l=>{w.value=l,u.value=2,await ce({type:4,folderPath:l.value}).then(o=>{i.value=o.data})},pe=async l=>{u.value=3,f.value=l,await we({folderPath:l.value}).then(o=>{a.value=o.data})},me=l=>{xe({folderPath:l.value})};let _e=W(()=>m.value.filter(l=>l.name.toLowerCase().includes(T.value.toLowerCase())));return ee(async()=>{await ce({type:3}).then(l=>{m.value=l.data}),await ie({pageNo:1,pageSize:5,musicName:I.value,playlist:1}).then(l=>{n.value=l.data.result}),G.on("musicChanged",l=>{k.value=l})}),Te(()=>{G.off("musicChanged")}),(l,o)=>{const g=D,F=Z,R=be,fe=ye,he=ke,O=Ce,ae=ge;return r(),b("div",_t,[s(ae,{class:"layout-container-demo"},{default:_(()=>[s(he,null,{default:_(()=>[s(fe,{"default-active":t.value,onSelect:A},{default:_(()=>[s(R,{index:"1",class:z(t.value==="1"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"歌手专辑",placement:"right"},{default:_(()=>[s(g,{size:22,"icon-class":"musician"})]),_:1}),ft]),_:1},8,["class"]),s(R,{index:"2",class:z(t.value==="2"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"全部歌曲",placement:"right"},{default:_(()=>[s(g,{size:22,"icon-class":"music"})]),_:1})]),_:1},8,["class"]),s(R,{index:"3",class:z(t.value==="3"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"我喜欢的",placement:"right"},{default:_(()=>[s(g,{size:22,"icon-class":"favorite"})]),_:1})]),_:1},8,["class"]),s(R,{index:"4",class:z(t.value==="4"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"播放列表",placement:"right"},{default:_(()=>[s(g,{size:22,"icon-class":"music-list"})]),_:1})]),_:1},8,["class"])]),_:1},8,["default-active"])]),_:1}),s(ae,{class:"right-container"},{default:_(()=>[t.value==="4"?(r(),b("div",ht,[e("div",gt,[s(O,{modelValue:E.value,"onUpdate:modelValue":o[0]||(o[0]=v=>E.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",bt,[s(g,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[1]||(o[1]=v=>L(h.value))}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$})]),s(Y,{"table-data":n.value,"current-music":k.value,"click-t":L,"page-change":U},null,8,["table-data","current-music"])])):t.value==="3"?(r(),b("div",yt,[e("div",kt,[s(O,{modelValue:P.value,"onUpdate:modelValue":o[2]||(o[2]=v=>P.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",Ct,[s(g,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[3]||(o[3]=v=>L(h.value))}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$})]),s(Y,{"table-data":c.value,"current-music":k.value,"click-t":L,"page-change":U},null,8,["table-data","current-music"])])):t.value==="2"?(r(),b("div",$t,[e("div",wt,[s(O,{modelValue:x.value,"onUpdate:modelValue":o[4]||(o[4]=v=>x.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",xt,[s(g,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[5]||(o[5]=v=>L(h.value))}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$})]),s(Y,{"table-data":c.value,"current-music":k.value,"click-t":L,"page-change":U},null,8,["table-data","current-music"])])):(r(),b("div",zt,[u.value==1?(r(),b("div",Mt,[e("div",Tt,[s(O,{modelValue:T.value,"onUpdate:modelValue":o[6]||(o[6]=v=>T.value=v),placeholder:"歌手名字"},null,8,["modelValue"])]),(r(!0),b(q,null,H(S(_e),v=>(r(),b("div",{class:"col-card",onClick:Ut=>ve(v)},[s(ne,{size:"xlarge",src:S(J)()+"thumbnail/music/"+v.name+".png"},null,8,["src"]),e("div",Nt,y(v.name),1)],8,St))),256))])):u.value==2?(r(),b("div",It,[e("div",Vt,[s(ne,{size:"xlarge",src:S(J)()+"thumbnail/music/"+w.value.name+".png"},null,8,["src"]),e("div",At,y(w.value.name),1),e("div",{style:{"background-color":"var(--gw-bg-active-color)",padding:"5px","border-radius":"5px"},onClick:o[7]||(o[7]=v=>u.value=1)},[s(g,{size:20,"icon-class":"back"})])]),e("div",Lt,[(r(!0),b(q,null,H(i.value,v=>(r(),V(Pe,{image:S(J)()+"preview/"+v.value+"/"+v.name+".jpg","card-data":v,title:v.name,"click-t":pe},null,8,["image","card-data","title"]))),256))])])):(r(),b("div",Pt,[e("div",Et,[e("img",{style:{width:"100px",height:"100px","border-radius":"10px"},src:S(J)()+"preview/"+f.value.value+"/"+f.value.name+".jpg"},null,8,Gt),e("div",Wt,y(f.value.name),1),e("div",{style:{"background-color":"var(--gw-bg-active-color)",padding:"5px","border-radius":"5px"},onClick:o[8]||(o[8]=v=>u.value=2)},[s(g,{size:20,"icon-class":"back"})])]),e("div",jt,[s(g,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[9]||(o[9]=v=>L(h.value))}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$}),s(g,{style:{cursor:"pointer"},size:20,"icon-class":"refresh-music",onClick:o[10]||(o[10]=v=>me(f.value))})]),s(Ze,{"current-music":k.value,"table-data":a.value,"page-change":U,"click-t":L},null,8,["current-music","table-data"])]))]))]),_:1})]),_:1})])}}}),ns=j(Bt,[["__scopeId","data-v-18ad9afa"]]);export{ns as default};
