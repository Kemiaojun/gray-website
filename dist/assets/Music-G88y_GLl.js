import{E as Q,b as D,l as ye,n as ke,o as Ce,p as $e,h as we}from"./element-plus-D_LIGSL8.js";import{_ as B,a as ee,g as J}from"./index-D2i2L_dS.js";import{b as xe}from"./vue-router-DaOdIdNP.js";import{m as ie}from"./movie-Chv3DP5H.js";import{d as G}from"./request_website-Db_aJBwQ.js";import{d as U,o as d,c as h,a as e,J as x,I as ze,u as T,U as b,ab as Me,h as j,r as p,b as te,M as H,a7 as K,Q as I,P as f,L as i,at as se,au as ne,w as Y,G as Te}from"./@vue-BV9Q_yhH.js";import{e as E}from"./mitt-CJohXFwE.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";/* empty css                             */import"./pinia-CWZPuNdE.js";import"./axios-Cm0UX6qg.js";import"./vue-pdf-embed-BcRweBTn.js";import"./mitt-DJ65BbbF.js";const Se=c=>G.post("/music/refresh",c),Ne=c=>G.post("/music/list",c),ue=c=>G.get("/music/like/"+c),de=c=>G.get("/music/playlist/add/"+c),ce=c=>G.post("/music/page",{...c}),Ie=["src"],Ve=U({__name:"Avatar",props:{size:{type:String,default:"medium"},src:{type:String,default:"/favicon.png"}},setup(c){return(t,V)=>(d(),h("div",{class:x(["avatar",c.size])},[e("img",{src:c.src,alt:""},null,8,Ie)],2))}}),re=B(Ve,[["__scopeId","data-v-7956860e"]]),Ae={class:"card_image"},Le=["src"],Pe={class:"card_title title-white"},Ee=U({__name:"GWTitleCard",props:{image:{},title:{},cardData:{},clickT:{type:Function}},setup(c){const t=c,{image:V,title:S}=ze(t);function z(){if(t!=null&&t.clickT){const y=t.cardData?Me(t.cardData):{};t==null||t.clickT(y)}}return(y,u)=>(d(),h("div",{class:"card",onClick:z},[e("div",Ae,[e("img",{src:T(V)},null,8,Le),e("div",Pe,[e("p",null,b(T(S)),1)])])]))}}),je=B(Ee,[["__scopeId","data-v-bef4cf5f"]]),X=c=>(se("data-v-53311fc5"),c=c(),ne(),c),Be={class:"grid"},Ge=X(()=>e("th",{class:"pc-show"},"Size",-1)),Ue=X(()=>e("th",{class:"pc-show"},"Time",-1)),We=X(()=>e("th",{class:"pc-show"},"Ext",-1)),Fe=X(()=>e("th",null,"Operation",-1)),Re={class:"pc-show"},Oe=["onClick"],qe={class:"pc-show"},Je={class:"pc-show"},Qe={class:"pc-show"},He={class:"ext-div"},Ke={style:{display:"flex"}},Xe={class:"controls"},Ye=["disabled"],Ze=["disabled"],De=U({__name:"GWSortableTable",props:{currentMusic:{},tableData:{},clickT:{type:Function},pageChange:{type:Function}},setup(c){const t=c;let V=j(()=>t.currentMusic?t.currentMusic.id:-1);function S(n){t!=null&&t.clickT&&(t==null||t.clickT([n]))}async function z(n,a){await ue(a.id).then(r=>{r.data&&(m.value[n].favorite=m.value[n].favorite=="是"?"否":"是",Q({type:"info",message:"歌曲添加到我喜欢"}))}).finally(()=>{})}async function y(n,a){await de(a.id).then(r=>{r.data&&(m.value[n].playlist=m.value[n].playlist=="是"?"否":"是",Q({type:"info",message:"歌曲添加到播放列表"}))}).finally(()=>{})}const u=p("trackNumber"),$=p("asc"),_=p(0),M=p(5),N=n=>{n===u.value?$.value=$.value==="asc"?"desc":"asc":$.value="asc",u.value=n},w=function(n){return n===-1&&_.value>0||n===1&&(_.value+1)*M.value<t.tableData.length},L=()=>{w(-1)&&_.value--,t.pageChange&&t.pageChange(m.value)},P=()=>{w(1)&&_.value++,t.pageChange&&t.pageChange(m.value)};let m=j(()=>t.tableData.sort((n,a)=>{let r=$.value==="asc"?1:-1;return n[u.value]<a[u.value]?-1*r:n[u.value]>a[u.value]?1*r:0}).filter((n,a)=>{let r=_.value*M.value,g=(_.value+1)*M.value;return a>=r&&a<g}));return te(()=>{setTimeout(()=>{t.pageChange&&t.pageChange(m.value)},1e3)}),(n,a)=>{const r=ee,g=D;return d(),h("div",Be,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{class:x(["pc-show",{sorted:u.value==="trackNumber"}]),onClick:a[0]||(a[0]=l=>N("trackNumber"))}," # ",2),e("th",{class:x({sorted:u.value==="title"}),onClick:a[1]||(a[1]=l=>N("title"))}," Title ",2),Ge,Ue,We,Fe])]),e("tbody",null,[(d(!0),h(H,null,K(T(m),(l,k)=>(d(),h("tr",null,[e("td",Re,b(l.trackNumber),1),e("td",{onClick:C=>S(l)},[e("div",{class:x(l.id==T(V)?"music-title active":"music-title")},b(l.title),3)],8,Oe),e("td",qe,b(l.prettySize),1),e("td",Je,b(l.duration>0?l.duration:"未知"),1),e("td",Qe,[e("div",He,b(l.ext),1)]),e("td",Ke,[l.favorite=="否"?(d(),I(g,{key:0,class:"item",effect:"dark",content:"添加到我喜欢",placement:"right"},{default:f(()=>[i(r,{size:20,"icon-class":"mine_heart",onClick:C=>z(k,l)},null,8,["onClick"])]),_:2},1024)):(d(),I(g,{key:1,class:"item",effect:"dark",content:"从我喜欢移除",placement:"right"},{default:f(()=>[i(r,{size:20,"icon-class":"heart-break",onClick:C=>z(k,l)},null,8,["onClick"])]),_:2},1024)),l.playlist=="否"?(d(),I(g,{key:2,class:"item",effect:"dark",content:"添加到播放列表",placement:"right"},{default:f(()=>[i(r,{style:{"margin-left":"10px"},size:20,"icon-class":"list",onClick:C=>y(k,l)},null,8,["onClick"])]),_:2},1024)):(d(),I(g,{key:3,class:"item",effect:"dark",content:"从播放列表移除",placement:"right"},{default:f(()=>[i(r,{style:{"margin-left":"10px"},size:20,"icon-class":"delete",onClick:C=>y(k,l)},null,8,["onClick"])]),_:2},1024))])]))),256))])]),e("div",Xe,[e("button",{class:"btn btn-sm",disabled:!w(-1),onClick:L}," ← ",8,Ye),e("button",{class:"btn btn-sm",disabled:!w(1),onClick:P}," → ",8,Ze)])])}}}),et=B(De,[["__scopeId","data-v-53311fc5"]]),le=c=>(se("data-v-0185e992"),c=c(),ne(),c),tt={class:"grid"},st=le(()=>e("th",{class:"pc-show"},"Size",-1)),nt=le(()=>e("th",{class:"pc-show"},"Ext",-1)),lt=le(()=>e("th",null,"Operation",-1)),at={class:"pc-show"},ot=["onClick"],it={class:"pc-show"},ct={class:"pc-show"},rt={class:"pc-show"},ut={class:"ext-div"},dt={style:{display:"flex"}},vt={class:"controls"},pt=["disabled"],mt=["disabled"],ft=U({__name:"GWMusicSortableTable",props:{currentMusic:{},tableData:{},clickT:{type:Function},pageChange:{type:Function}},setup(c){const t=c;let V=j(()=>t.currentMusic?t.currentMusic.id:-1);function S(n){t!=null&&t.clickT&&(t==null||t.clickT([n]))}async function z(n,a){await ue(a.id).then(r=>{r.data&&(m.value[n].favorite=m.value[n].favorite=="是"?"否":"是",Q({type:"info",message:"歌曲添加到我喜欢"}))}).finally(()=>{})}async function y(n,a){await de(a.id).then(r=>{r.data&&(m.value[n].playlist=m.value[n].playlist=="是"?"否":"是",Q({type:"info",message:"歌曲添加到播放列表"}))}).finally(()=>{})}const u=p("trackNumber"),$=p("asc"),_=p(0),M=p(5),N=n=>{n===u.value?$.value=$.value==="asc"?"desc":"asc":$.value="asc",u.value=n},w=function(n){return n===-1&&_.value>0||n===1&&(_.value+1)*M.value<t.tableData.length},L=()=>{w(-1)&&_.value--,t.pageChange&&t.pageChange(m.value)},P=()=>{w(1)&&_.value++,t.pageChange&&t.pageChange(m.value)};let m=j(()=>t.tableData.sort((n,a)=>{let r=$.value==="asc"?1:-1;return n[u.value]<a[u.value]?-1*r:n[u.value]>a[u.value]?1*r:0}).filter((n,a)=>{let r=_.value*M.value,g=(_.value+1)*M.value;return a>=r&&a<g}));return te(()=>{setTimeout(()=>{t.pageChange&&t.pageChange(m.value)},1e3)}),(n,a)=>{const r=ee,g=D;return d(),h("div",tt,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{class:x(["pc-show",u.value==="trackNumber"?"sorted":""]),onClick:a[0]||(a[0]=l=>N("trackNumber"))}," # ",2),e("th",{class:x({sorted:u.value==="title"}),onClick:a[1]||(a[1]=l=>N("title"))}," Title ",2),e("th",{class:x([u.value==="artist"?"sorted":""]),onClick:a[2]||(a[2]=l=>N("artist"))}," Artist ",2),e("th",{class:x(["pc-show",u.value==="album"?"sorted":""]),onClick:a[3]||(a[3]=l=>N("album"))}," Album ",2),st,nt,lt])]),e("tbody",null,[(d(!0),h(H,null,K(T(m),(l,k)=>(d(),h("tr",null,[e("td",at,b(l.trackNumber),1),e("td",{onClick:C=>S(l)},[e("div",{class:x(l.id==T(V)?"music-title active":"music-title")},b(l.title),3)],8,ot),e("td",null,b(l.artist),1),e("td",it,b(l.album),1),e("td",ct,b(l.prettySize),1),e("td",rt,[e("div",ut,b(l.ext),1)]),e("td",dt,[l.favorite=="否"?(d(),I(g,{key:0,class:"item",effect:"dark",content:"添加到我喜欢",placement:"right"},{default:f(()=>[i(r,{size:20,"icon-class":"mine_heart",onClick:C=>z(k,l)},null,8,["onClick"])]),_:2},1024)):(d(),I(g,{key:1,class:"item",effect:"dark",content:"从我喜欢移除",placement:"right"},{default:f(()=>[i(r,{size:20,"icon-class":"heart-break",onClick:C=>z(k,l)},null,8,["onClick"])]),_:2},1024)),l.playlist=="否"?(d(),I(g,{key:2,class:"item",effect:"dark",content:"添加到播放列表",placement:"right"},{default:f(()=>[i(r,{style:{"margin-left":"10px"},size:20,"icon-class":"list",onClick:C=>y(k,l)},null,8,["onClick"])]),_:2},1024)):(d(),I(g,{key:3,class:"item",effect:"dark",content:"从播放列表移除",placement:"right"},{default:f(()=>[i(r,{style:{"margin-left":"10px"},size:20,"icon-class":"delete",onClick:C=>y(k,l)},null,8,["onClick"])]),_:2},1024))])]))),256))])]),e("div",vt,[e("button",{class:"btn btn-sm",disabled:!w(-1),onClick:L}," ← ",8,pt),e("button",{class:"btn btn-sm",disabled:!w(1),onClick:P}," → ",8,mt)])])}}}),Z=B(ft,[["__scopeId","data-v-0185e992"]]),ae=c=>(se("data-v-d80d189f"),c=c(),ne(),c),_t={class:"music-root-container"},gt=ae(()=>e("div",{style:{"margin-left":"10px"}},null,-1)),ht={key:0,class:"tab-body"},bt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-bg-font-01)"}},yt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-bg-font-01)"}},kt={key:1,class:"tab-body"},Ct={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-bg-font-01)"}},$t={class:"row-card",style:{"border-bottom":"1px solid var(--gw-bg-font-01)"}},wt={key:2,class:"tab-body"},xt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-bg-font-01)"}},zt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-bg-font-01)"}},Mt={key:3,class:"tab-body"},Tt={key:0},St={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-bg-font-01)"}},Nt=["onClick"],It={class:"name"},Vt={key:1,class:"row-card"},At={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-bg-font-01)"}},Lt={class:"pc-show",style:{"flex-grow":"1","font-weight":"bold","font-style":"italic"}},Pt=ae(()=>e("span",{style:{"font-size":"2rem"},class:"iconfont icon-back-filled"},null,-1)),Et=[Pt],jt={class:"row-card"},Bt={key:2},Gt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-bg-font-01)"}},Ut=["src"],Wt={class:"pc-show",style:{"flex-grow":"1","font-weight":"bold","font-style":"italic"}},Ft=ae(()=>e("span",{style:{"font-size":"2rem"},class:"iconfont icon-back-filled"},null,-1)),Rt=[Ft],Ot={class:"row-card",style:{"border-bottom":"1px solid var(--gw-bg-font-01)"}},qt=U({__name:"Music",setup(c){xe();const t=p("1"),V=function(s,o){t.value=s,s=="1"?u.value=1:s=="2"?S():s=="3"?S({favorite:1}):s=="4"&&S({playlist:1})};async function S(s){await ce({pageNo:1,pageSize:500,name:s==null?void 0:s.musicName,favorite:s==null?void 0:s.favorite,playlist:s==null?void 0:s.playlist}).then(o=>{l.value=o.data.result})}const z=function(s){S({musicName:s})},y=p(),u=p(1),$=p(),_=p(),M=p(""),N=p(""),w=p(),L=p(),P=p(),m=p([]),n=p([]);p([]);const a=p([]),r=p([]),g=p([]),l=p([]);Y(()=>w.value,s=>{z(s)}),Y(()=>L.value,s=>{z(s)}),Y(()=>P.value,s=>{z(s)});const k=()=>{E.emit("previousMusic")},C=()=>{E.emit("nextMusic")},ve=s=>{E.emit("setMusic",s)},pe=()=>{E.emit("playMusic")},A=s=>{E.emit("playSelectedMusic",s),ve(0),pe()},W=function(s){g.value=s},me=async s=>{$.value=s,u.value=2,await ie({type:4,folderPath:s.value}).then(o=>{a.value=o.data})},fe=async s=>{u.value=3,_.value=s,await Ne({folderPath:s.value}).then(o=>{n.value=o.data})},_e=s=>{Se({folderPath:s.value})};let ge=j(()=>m.value.filter(s=>s.name.toLowerCase().includes(M.value.toLowerCase())));return te(async()=>{await ie({type:3}).then(s=>{m.value=s.data}),await ce({pageNo:1,pageSize:5,musicName:N.value,playlist:1}).then(s=>{r.value=s.data.result}),E.on("musicChanged",s=>{y.value=s})}),Te(()=>{E.off("musicChanged")}),(s,o)=>{const F=ee,R=D,O=ke,he=Ce,be=$e,q=we,oe=ye;return d(),h("div",_t,[i(oe,{class:"layout-container-demo"},{default:f(()=>[i(be,null,{default:f(()=>[i(he,{"default-active":t.value,onSelect:V},{default:f(()=>[i(O,{index:"1",class:x(t.value==="1"?"selectTab":"")},{default:f(()=>[i(R,{class:"item",effect:"dark",content:"歌手专辑",placement:"right"},{default:f(()=>[i(F,{size:22,"icon-class":"musician"})]),_:1}),gt]),_:1},8,["class"]),i(O,{index:"2",class:x(t.value==="2"?"selectTab":"")},{default:f(()=>[i(R,{class:"item",effect:"dark",content:"全部歌曲",placement:"right"},{default:f(()=>[i(F,{size:22,"icon-class":"music"})]),_:1})]),_:1},8,["class"]),i(O,{index:"3",class:x(t.value==="3"?"selectTab":"")},{default:f(()=>[i(R,{class:"item",effect:"dark",content:"我喜欢的",placement:"right"},{default:f(()=>[i(F,{size:22,"icon-class":"favorite"})]),_:1})]),_:1},8,["class"]),i(O,{index:"4",class:x(t.value==="4"?"selectTab":"")},{default:f(()=>[i(R,{class:"item",effect:"dark",content:"播放列表",placement:"right"},{default:f(()=>[i(F,{size:22,"icon-class":"music-list"})]),_:1})]),_:1},8,["class"])]),_:1},8,["default-active"])]),_:1}),i(oe,{class:"right-container"},{default:f(()=>[t.value==="4"?(d(),h("div",ht,[e("div",bt,[i(q,{modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=v=>P.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",yt,[e("span",{style:{"font-size":"2rem",cursor:"pointer",transform:"rotate(180deg)"},onClick:k,class:"iconfont icon-next"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[1]||(o[1]=v=>A(g.value)),class:"iconfont icon-play"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[2]||(o[2]=v=>C()),class:"iconfont icon-next"})]),i(Z,{"table-data":r.value,"current-music":y.value,"click-t":A,"page-change":W},null,8,["table-data","current-music"])])):t.value==="3"?(d(),h("div",kt,[e("div",Ct,[i(q,{modelValue:L.value,"onUpdate:modelValue":o[3]||(o[3]=v=>L.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",$t,[e("span",{style:{"font-size":"2rem",cursor:"pointer",transform:"rotate(180deg)"},onClick:k,class:"iconfont icon-next"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[4]||(o[4]=v=>A(g.value)),class:"iconfont icon-play"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[5]||(o[5]=v=>C()),class:"iconfont icon-next"})]),i(Z,{"table-data":l.value,"current-music":y.value,"click-t":A,"page-change":W},null,8,["table-data","current-music"])])):t.value==="2"?(d(),h("div",wt,[e("div",xt,[i(q,{modelValue:w.value,"onUpdate:modelValue":o[6]||(o[6]=v=>w.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",zt,[e("span",{style:{"font-size":"2rem",cursor:"pointer",transform:"rotate(180deg)"},onClick:k,class:"iconfont icon-next"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[7]||(o[7]=v=>A(g.value)),class:"iconfont icon-play"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[8]||(o[8]=v=>C()),class:"iconfont icon-next"})]),i(Z,{"table-data":l.value,"current-music":y.value,"click-t":A,"page-change":W},null,8,["table-data","current-music"])])):(d(),h("div",Mt,[u.value==1?(d(),h("div",Tt,[e("div",St,[i(q,{modelValue:M.value,"onUpdate:modelValue":o[9]||(o[9]=v=>M.value=v),placeholder:"歌手名字"},null,8,["modelValue"])]),(d(!0),h(H,null,K(T(ge),v=>(d(),h("div",{class:"col-card",onClick:Jt=>me(v)},[i(re,{size:"xlarge",src:T(J)()+"thumbnail/music/"+v.name+".png"},null,8,["src"]),e("div",It,b(v.name),1)],8,Nt))),256))])):u.value==2?(d(),h("div",Vt,[e("div",At,[i(re,{size:"xlarge",src:T(J)()+"thumbnail/music/"+$.value.name+".png"},null,8,["src"]),e("div",Lt,b($.value.name),1),e("div",{style:{"background-color":"var(--gw-bg-active)",padding:"5px","border-radius":"5px"},onClick:o[10]||(o[10]=v=>u.value=1)},Et)]),e("div",jt,[(d(!0),h(H,null,K(a.value,v=>(d(),I(je,{image:T(J)()+"preview/"+v.value+"/"+v.name+".jpg","card-data":v,title:v.name,"click-t":fe},null,8,["image","card-data","title"]))),256))])])):(d(),h("div",Bt,[e("div",Gt,[e("img",{style:{width:"100px",height:"100px","border-radius":"10px"},src:T(J)()+"preview/"+_.value.value+"/"+_.value.name+".jpg"},null,8,Ut),e("div",Wt,b(_.value.name),1),e("div",{style:{"background-color":"var(--gw-bg-active)",padding:"5px","border-radius":"5px"},onClick:o[11]||(o[11]=v=>u.value=2)},Rt)]),e("div",Ot,[e("span",{style:{"font-size":"2rem",cursor:"pointer",transform:"rotate(180deg)"},onClick:k,class:"iconfont icon-next"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[12]||(o[12]=v=>A(g.value)),class:"iconfont icon-play"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:C,class:"iconfont icon-next"}),e("span",{style:{"font-size":"2rem",cursor:"pointer"},onClick:o[13]||(o[13]=v=>_e(_.value)),class:"iconfont icon-refresh"})]),i(et,{"current-music":y.value,"table-data":n.value,"page-change":W,"click-t":A},null,8,["current-music","table-data"])]))]))]),_:1})]),_:1})])}}}),vs=B(qt,[["__scopeId","data-v-d80d189f"]]);export{vs as default};
