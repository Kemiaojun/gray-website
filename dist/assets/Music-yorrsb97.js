import{E as Q,b as Z,l as be,n as ye,o as ke,p as Ce,h as $e}from"./element-plus-D_LIGSL8.js";import{_ as j,a as D,g as J}from"./index-DV9ndaCL.js";import{b as we}from"./vue-router-DaOdIdNP.js";import{m as ce}from"./movie-DCuZreOe.js";import{m as ue,a as re,p as ie,b as xe,c as ze}from"./music-DxoV3E8S.js";import{d as B,o as r,c as g,a as e,J as z,I as Me,u as S,U as y,ab as Te,h as W,r as d,b as ee,M as q,a7 as H,Q as V,P as _,L as s,at as te,au as se,w as X,G as Se}from"./@vue-BV9Q_yhH.js";import{e as G}from"./mitt-CJohXFwE.js";import"./lodash-es-BDpUAi6D.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-DVUPgnhb.js";import"./dayjs-Dc0JWrkO.js";import"./@element-plus-DgtNr1CL.js";import"./@ctrl-D_sRHO8g.js";import"./@popperjs-D9SI2xQl.js";import"./pinia-CWZPuNdE.js";import"./axios-Cm0UX6qg.js";import"./vue-pdf-embed-BcRweBTn.js";import"./request_website-uuRCCdeq.js";import"./mitt-DJ65BbbF.js";const Ne=["src"],Ie=B({__name:"GWAvatar",props:{size:{type:String,default:"medium"},src:{type:String,default:"/favicon.png"}},setup(p){return(t,A)=>(r(),g("div",{class:z(["avatar",p.size])},[e("img",{src:p.src,alt:""},null,8,Ne)],2))}}),oe=j(Ie,[["__scopeId","data-v-b65b1e4f"]]),Ve={class:"card_image"},Ae=["src"],Le={class:"card_title title-white"},Pe=B({__name:"GWTitleCard",props:{image:{},title:{},cardData:{},clickT:{type:Function}},setup(p){const t=p,{image:A,title:N}=Me(t);function M(){if(t!=null&&t.clickT){const k=t.cardData?Te(t.cardData):{};t==null||t.clickT(k)}}return(k,u)=>(r(),g("div",{class:"card",onClick:M},[e("div",Ve,[e("img",{src:S(A)},null,8,Ae),e("div",Le,[e("p",null,y(S(N)),1)])])]))}}),Ee=j(Pe,[["__scopeId","data-v-5c9bc0c1"]]),K=p=>(te("data-v-8a1c12c5"),p=p(),se(),p),Ge={class:"grid"},We=K(()=>e("th",{class:"pc-show"},"Size",-1)),je=K(()=>e("th",{class:"pc-show"},"Time",-1)),Be=K(()=>e("th",{class:"pc-show"},"Ext",-1)),Ue=K(()=>e("th",null,"Operation",-1)),Fe={class:"pc-show"},Re=["onClick"],Oe={class:"pc-show"},Je={class:"pc-show"},Qe={class:"pc-show"},qe={class:"ext-div"},He={style:{display:"flex"}},Ke={class:"controls"},Xe=["disabled"],Ye=["disabled"],Ze=B({__name:"GWSortableTable",props:{currentMusic:{},tableData:{},clickT:{type:Function},pageChange:{type:Function}},setup(p){const t=p;let A=W(()=>t.currentMusic?t.currentMusic.id:-1);function N(a){t!=null&&t.clickT&&(t==null||t.clickT([a]))}async function M(a,c){await ue(c.id).then(i=>{i.data&&(m.value[a].favorite=m.value[a].favorite=="是"?"否":"是",Q({type:"info",message:"歌曲添加到我喜欢"}))}).finally(()=>{})}async function k(a,c){await re(c.id).then(i=>{i.data&&(m.value[a].playlist=m.value[a].playlist=="是"?"否":"是",Q({type:"info",message:"歌曲添加到播放列表"}))}).finally(()=>{})}const u=d("trackNumber"),w=d("asc"),f=d(0),T=d(5),I=a=>{a===u.value?w.value=w.value==="asc"?"desc":"asc":w.value="asc",u.value=a},x=function(a){return a===-1&&f.value>0||a===1&&(f.value+1)*T.value<t.tableData.length},P=()=>{x(-1)&&f.value--,t.pageChange&&t.pageChange(m.value)},E=()=>{x(1)&&f.value++,t.pageChange&&t.pageChange(m.value)};let m=W(()=>t.tableData.sort((a,c)=>{let i=w.value==="asc"?1:-1;return a[u.value]<c[u.value]?-1*i:a[u.value]>c[u.value]?1*i:0}).filter((a,c)=>{let i=f.value*T.value,h=(f.value+1)*T.value;return c>=i&&c<h}));return ee(()=>{setTimeout(()=>{t.pageChange&&t.pageChange(m.value)},1e3)}),(a,c)=>{const i=D,h=Z;return r(),g("div",Ge,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{class:z(["pc-show",{sorted:u.value==="trackNumber"}]),onClick:c[0]||(c[0]=n=>I("trackNumber"))}," # ",2),e("th",{class:z({sorted:u.value==="title"}),onClick:c[1]||(c[1]=n=>I("title"))}," Title ",2),We,je,Be,Ue])]),e("tbody",null,[(r(!0),g(q,null,H(S(m),(n,C)=>(r(),g("tr",null,[e("td",Fe,y(n.trackNumber),1),e("td",{onClick:$=>N(n)},[e("div",{class:z(n.id==S(A)?"music-title active":"music-title")},y(n.title),3)],8,Re),e("td",Oe,y(n.prettySize),1),e("td",Je,y(n.duration>0?n.duration:"未知"),1),e("td",Qe,[e("div",qe,y(n.ext),1)]),e("td",He,[n.favorite=="否"?(r(),V(h,{key:0,class:"item",effect:"dark",content:"添加到我喜欢",placement:"right"},{default:_(()=>[s(i,{size:20,"icon-class":"mine_heart",onClick:$=>M(C,n)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:1,class:"item",effect:"dark",content:"从我喜欢移除",placement:"right"},{default:_(()=>[s(i,{size:20,"icon-class":"heart-break",onClick:$=>M(C,n)},null,8,["onClick"])]),_:2},1024)),n.playlist=="否"?(r(),V(h,{key:2,class:"item",effect:"dark",content:"添加到播放列表",placement:"right"},{default:_(()=>[s(i,{style:{"margin-left":"10px"},size:20,"icon-class":"list",onClick:$=>k(C,n)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:3,class:"item",effect:"dark",content:"从播放列表移除",placement:"right"},{default:_(()=>[s(i,{style:{"margin-left":"10px"},size:20,"icon-class":"delete",onClick:$=>k(C,n)},null,8,["onClick"])]),_:2},1024))])]))),256))])]),e("div",Ke,[e("button",{class:"btn btn-sm",disabled:!x(-1),onClick:P}," ← ",8,Xe),e("button",{class:"btn btn-sm",disabled:!x(1),onClick:E}," → ",8,Ye)])])}}}),De=j(Ze,[["__scopeId","data-v-8a1c12c5"]]),le=p=>(te("data-v-da0375f2"),p=p(),se(),p),et={class:"grid"},tt=le(()=>e("th",{class:"pc-show"},"Size",-1)),st=le(()=>e("th",{class:"pc-show"},"Ext",-1)),lt=le(()=>e("th",null,"Operation",-1)),at={class:"pc-show"},nt=["onClick"],ct={class:"pc-show"},it={class:"pc-show"},ot={class:"pc-show"},ut={class:"ext-div"},rt={style:{display:"flex"}},dt={class:"controls"},vt=["disabled"],pt=["disabled"],mt=B({__name:"GWMusicSortableTable",props:{currentMusic:{},tableData:{},clickT:{type:Function},pageChange:{type:Function}},setup(p){const t=p;let A=W(()=>t.currentMusic?t.currentMusic.id:-1);function N(a){t!=null&&t.clickT&&(t==null||t.clickT([a]))}async function M(a,c){await ue(c.id).then(i=>{i.data&&(m.value[a].favorite=m.value[a].favorite=="是"?"否":"是",Q({type:"info",message:"歌曲添加到我喜欢"}))}).finally(()=>{})}async function k(a,c){await re(c.id).then(i=>{i.data&&(m.value[a].playlist=m.value[a].playlist=="是"?"否":"是",Q({type:"info",message:"歌曲添加到播放列表"}))}).finally(()=>{})}const u=d("trackNumber"),w=d("asc"),f=d(0),T=d(5),I=a=>{a===u.value?w.value=w.value==="asc"?"desc":"asc":w.value="asc",u.value=a},x=function(a){return a===-1&&f.value>0||a===1&&(f.value+1)*T.value<t.tableData.length},P=()=>{x(-1)&&f.value--,t.pageChange&&t.pageChange(m.value)},E=()=>{x(1)&&f.value++,t.pageChange&&t.pageChange(m.value)};let m=W(()=>t.tableData.sort((a,c)=>{let i=w.value==="asc"?1:-1;return a[u.value]<c[u.value]?-1*i:a[u.value]>c[u.value]?1*i:0}).filter((a,c)=>{let i=f.value*T.value,h=(f.value+1)*T.value;return c>=i&&c<h}));return ee(()=>{setTimeout(()=>{t.pageChange&&t.pageChange(m.value)},1e3)}),(a,c)=>{const i=D,h=Z;return r(),g("div",et,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{class:z(["pc-show",u.value==="trackNumber"?"sorted":""]),onClick:c[0]||(c[0]=n=>I("trackNumber"))}," # ",2),e("th",{class:z({sorted:u.value==="title"}),onClick:c[1]||(c[1]=n=>I("title"))}," Title ",2),e("th",{class:z([u.value==="artist"?"sorted":""]),onClick:c[2]||(c[2]=n=>I("artist"))}," Artist ",2),e("th",{class:z(["pc-show",u.value==="album"?"sorted":""]),onClick:c[3]||(c[3]=n=>I("album"))}," Album ",2),tt,st,lt])]),e("tbody",null,[(r(!0),g(q,null,H(S(m),(n,C)=>(r(),g("tr",null,[e("td",at,y(n.trackNumber),1),e("td",{onClick:$=>N(n)},[e("div",{class:z(n.id==S(A)?"music-title active":"music-title")},y(n.title),3)],8,nt),e("td",null,y(n.artist),1),e("td",ct,y(n.album),1),e("td",it,y(n.prettySize),1),e("td",ot,[e("div",ut,y(n.ext),1)]),e("td",rt,[n.favorite=="否"?(r(),V(h,{key:0,class:"item",effect:"dark",content:"添加到我喜欢",placement:"right"},{default:_(()=>[s(i,{size:20,"icon-class":"mine_heart",onClick:$=>M(C,n)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:1,class:"item",effect:"dark",content:"从我喜欢移除",placement:"right"},{default:_(()=>[s(i,{size:20,"icon-class":"heart-break",onClick:$=>M(C,n)},null,8,["onClick"])]),_:2},1024)),n.playlist=="否"?(r(),V(h,{key:2,class:"item",effect:"dark",content:"添加到播放列表",placement:"right"},{default:_(()=>[s(i,{style:{"margin-left":"10px"},size:20,"icon-class":"list",onClick:$=>k(C,n)},null,8,["onClick"])]),_:2},1024)):(r(),V(h,{key:3,class:"item",effect:"dark",content:"从播放列表移除",placement:"right"},{default:_(()=>[s(i,{style:{"margin-left":"10px"},size:20,"icon-class":"delete",onClick:$=>k(C,n)},null,8,["onClick"])]),_:2},1024))])]))),256))])]),e("div",dt,[e("button",{class:"btn btn-sm",disabled:!x(-1),onClick:P}," ← ",8,vt),e("button",{class:"btn btn-sm",disabled:!x(1),onClick:E}," → ",8,pt)])])}}}),Y=j(mt,[["__scopeId","data-v-da0375f2"]]),ae=p=>(te("data-v-c43df543"),p=p(),se(),p),_t={class:"music-root-container"},ft=ae(()=>e("div",{style:{"margin-left":"10px"}},null,-1)),ht={key:0,class:"tab-body"},gt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},bt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},yt={key:1,class:"tab-body"},kt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},Ct={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},$t={key:2,class:"tab-body"},wt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},xt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},zt={key:3,class:"tab-body"},Mt={key:0},Tt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},St=["onClick"],Nt={class:"name"},It={key:1,class:"row-card"},Vt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},At={class:"pc-show",style:{"flex-grow":"1","font-weight":"bold","font-style":"italic"}},Lt=ae(()=>e("span",{style:{"font-size":"2rem"},class:"iconfont icon-back-filled"},null,-1)),Pt=[Lt],Et={class:"row-card"},Gt={key:2},Wt={class:"row-card",style:{"justify-content":"space-between","align-items":"center","border-bottom":"1px solid var(--gw-font-color-1)"}},jt=["src"],Bt={class:"pc-show",style:{"flex-grow":"1","font-weight":"bold","font-style":"italic"}},Ut=ae(()=>e("span",{style:{"font-size":"2rem"},class:"iconfont icon-back-filled"},null,-1)),Ft=[Ut],Rt={class:"row-card",style:{"border-bottom":"1px solid var(--gw-font-color-1)"}},Ot=B({__name:"Music",setup(p){we();const t=d("1"),A=function(l,o){t.value=l,l=="1"?u.value=1:l=="2"?N():l=="3"?N({favorite:1}):l=="4"&&N({playlist:1})};async function N(l){await ie({pageNo:1,pageSize:500,name:l==null?void 0:l.musicName,favorite:l==null?void 0:l.favorite,playlist:l==null?void 0:l.playlist}).then(o=>{n.value=o.data.result})}const M=function(l){N({musicName:l})},k=d(),u=d(1),w=d(),f=d(),T=d(""),I=d(""),x=d(),P=d(),E=d(),m=d([]),a=d([]);d([]);const c=d([]),i=d([]),h=d([]),n=d([]);X(()=>x.value,l=>{M(l)}),X(()=>P.value,l=>{M(l)}),X(()=>E.value,l=>{M(l)});const C=()=>{G.emit("previousMusic")},$=()=>{G.emit("nextMusic")},de=l=>{G.emit("setMusic",l)},ve=()=>{G.emit("playMusic")},L=l=>{G.emit("playSelectedMusic",l),de(0),ve()},U=function(l){h.value=l},pe=async l=>{w.value=l,u.value=2,await ce({type:4,folderPath:l.value}).then(o=>{c.value=o.data})},me=async l=>{u.value=3,f.value=l,await xe({folderPath:l.value}).then(o=>{a.value=o.data})},_e=l=>{ze({folderPath:l.value})};let fe=W(()=>m.value.filter(l=>l.name.toLowerCase().includes(T.value.toLowerCase())));return ee(async()=>{await ce({type:3}).then(l=>{m.value=l.data}),await ie({pageNo:1,pageSize:5,musicName:I.value,playlist:1}).then(l=>{i.value=l.data.result}),G.on("musicChanged",l=>{k.value=l})}),Se(()=>{G.off("musicChanged")}),(l,o)=>{const b=D,F=Z,R=ye,he=ke,ge=Ce,O=$e,ne=be;return r(),g("div",_t,[s(ne,{class:"layout-container-demo"},{default:_(()=>[s(ge,null,{default:_(()=>[s(he,{"default-active":t.value,onSelect:A},{default:_(()=>[s(R,{index:"1",class:z(t.value==="1"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"歌手专辑",placement:"right"},{default:_(()=>[s(b,{size:22,"icon-class":"musician"})]),_:1}),ft]),_:1},8,["class"]),s(R,{index:"2",class:z(t.value==="2"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"全部歌曲",placement:"right"},{default:_(()=>[s(b,{size:22,"icon-class":"music"})]),_:1})]),_:1},8,["class"]),s(R,{index:"3",class:z(t.value==="3"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"我喜欢的",placement:"right"},{default:_(()=>[s(b,{size:22,"icon-class":"favorite"})]),_:1})]),_:1},8,["class"]),s(R,{index:"4",class:z(t.value==="4"?"selectTab":"")},{default:_(()=>[s(F,{class:"item",effect:"dark",content:"播放列表",placement:"right"},{default:_(()=>[s(b,{size:22,"icon-class":"music-list"})]),_:1})]),_:1},8,["class"])]),_:1},8,["default-active"])]),_:1}),s(ne,{class:"right-container"},{default:_(()=>[t.value==="4"?(r(),g("div",ht,[e("div",gt,[s(O,{modelValue:E.value,"onUpdate:modelValue":o[0]||(o[0]=v=>E.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",bt,[s(b,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[1]||(o[1]=v=>L(h.value))}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$})]),s(Y,{"table-data":i.value,"current-music":k.value,"click-t":L,"page-change":U},null,8,["table-data","current-music"])])):t.value==="3"?(r(),g("div",yt,[e("div",kt,[s(O,{modelValue:P.value,"onUpdate:modelValue":o[2]||(o[2]=v=>P.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",Ct,[s(b,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[3]||(o[3]=v=>L(h.value))}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$})]),s(Y,{"table-data":n.value,"current-music":k.value,"click-t":L,"page-change":U},null,8,["table-data","current-music"])])):t.value==="2"?(r(),g("div",$t,[e("div",wt,[s(O,{modelValue:x.value,"onUpdate:modelValue":o[4]||(o[4]=v=>x.value=v),placeholder:"歌曲名称"},null,8,["modelValue"])]),e("div",xt,[s(b,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[5]||(o[5]=v=>L(h.value))}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$})]),s(Y,{"table-data":n.value,"current-music":k.value,"click-t":L,"page-change":U},null,8,["table-data","current-music"])])):(r(),g("div",zt,[u.value==1?(r(),g("div",Mt,[e("div",Tt,[s(O,{modelValue:T.value,"onUpdate:modelValue":o[6]||(o[6]=v=>T.value=v),placeholder:"歌手名字"},null,8,["modelValue"])]),(r(!0),g(q,null,H(S(fe),v=>(r(),g("div",{class:"col-card",onClick:Jt=>pe(v)},[s(oe,{size:"xlarge",src:S(J)()+"thumbnail/music/"+v.name+".png"},null,8,["src"]),e("div",Nt,y(v.name),1)],8,St))),256))])):u.value==2?(r(),g("div",It,[e("div",Vt,[s(oe,{size:"xlarge",src:S(J)()+"thumbnail/music/"+w.value.name+".png"},null,8,["src"]),e("div",At,y(w.value.name),1),e("div",{style:{"background-color":"var(--gw-bg-active-color)",padding:"5px","border-radius":"5px"},onClick:o[7]||(o[7]=v=>u.value=1)},Pt)]),e("div",Et,[(r(!0),g(q,null,H(c.value,v=>(r(),V(Ee,{image:S(J)()+"preview/"+v.value+"/"+v.name+".jpg","card-data":v,title:v.name,"click-t":me},null,8,["image","card-data","title"]))),256))])])):(r(),g("div",Gt,[e("div",Wt,[e("img",{style:{width:"100px",height:"100px","border-radius":"10px"},src:S(J)()+"preview/"+f.value.value+"/"+f.value.name+".jpg"},null,8,jt),e("div",Bt,y(f.value.name),1),e("div",{style:{"background-color":"var(--gw-bg-active-color)",padding:"5px","border-radius":"5px"},onClick:o[8]||(o[8]=v=>u.value=2)},Ft)]),e("div",Rt,[s(b,{style:{cursor:"pointer"},size:20,"icon-class":"previous",onClick:C}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"play",onClick:o[9]||(o[9]=v=>L(h.value))}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"next",onClick:$}),s(b,{style:{cursor:"pointer"},size:20,"icon-class":"refresh-music",onClick:o[10]||(o[10]=v=>_e(f.value))})]),s(De,{"current-music":k.value,"table-data":a.value,"page-change":U,"click-t":L},null,8,["current-music","table-data"])]))]))]),_:1})]),_:1})])}}}),ds=j(Ot,[["__scopeId","data-v-c43df543"]]);export{ds as default};
