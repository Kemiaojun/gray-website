import{s as l}from"./pinia-CWZPuNdE.js";import{h as i,u as g,A as s,L as a,s as u,r as p,t as d}from"./index-BSrPZ2yy.js";const h=e=>i.post("/login",e),r=g(),{auth:t}=l(r),v=async(e,n)=>{t.value={token:"",status:s.Loging},await h({username:e,password:n,clientId:"blossom",grantType:"password"}).then(o=>{t.value={token:o.data.token,status:s.Succ},a.set(u,t.value);const c=p.currentRoute.value.query.redirect||"/home";d(c)}).catch(o=>{r.reset(),t.value={token:"",status:s.Fail}})},f=()=>{t.value={token:"",status:s.Wait},a.set(u,{token:"",status:s.Wait})};export{f as a,v as l};
